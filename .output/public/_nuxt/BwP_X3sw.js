import{_ as Z}from"./rdLTq2yI.js";import{i as ee,j as q,k as te,o as d,c as u,a,b as U,w as k,d as C,F as B,r as R,l as o,f as A,t as x,e as L,m as D,n as G,p as S,q as I,s as K,v as Q,x as N,y as O,z as E,A as T,B as F,C as w,D as V,E as $,G as P,H as J,I as ae}from"./B8mystvN.js";import{b as se,a as re,_ as W,c as le}from"./wYf66LjI.js";const ne={class:"mb-4"},oe={class:"flex mb-5","aria-label":"Breadcrumb"},ie={class:"inline-flex items-center space-x-1 text-sm font-medium md:space-x-2"},de={class:"inline-flex items-center"},ue={class:"flex items-center"},ge={key:1,class:"ml-1 text-gray-400 md:ml-2 dark:text-gray-500"},ce={__name:"Breadcrumbs",setup(t){const r=ee(),s=q(),l=te(()=>{let n="";return r.fullPath.substring(1).split("/").map(p=>{if(p)return n=`${n}/${p}`,s.resolve(n)}).filter(Boolean)});return(n,g)=>{const p=Z;return d(),u("div",ne,[a("nav",oe,[a("ol",ie,[a("li",de,[U(p,{to:{name:"index"},class:"inline-flex items-center text-gray-700 hover:text-primary-600 dark:text-gray-300 dark:hover:text-white"},{default:k(()=>g[0]||(g[0]=[a("svg",{class:"w-5 h-5 mr-2.5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})],-1),C(" Главная ")])),_:1})]),(d(!0),u(B,null,R(o(l),(e,c)=>(d(),u("li",{key:e.name},[a("div",ue,[g[1]||(g[1]=a("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[a("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),c!=Object.keys(o(l)).length-1?(d(),A(p,{key:0,to:{name:e.name},class:"ml-1 text-gray-700 hover:text-primary-600 md:ml-2 dark:text-gray-300 dark:hover:text-white"},{default:k(()=>[C(x(e.meta.breadcrumbs),1)]),_:2},1032,["to"])):(d(),u("span",ge,x(e.meta.breadcrumbs),1))])]))),128))])])])}}},pe=["disabled","type"],me=L({__name:"danger",props:{disabled:{default:!1},type:{default:"button"}},setup(t){const r=t;return(s,l)=>(d(),u("button",{disabled:r.disabled,type:r.type,"data-modal-toggle":"delete-user-modal",class:"inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-red-600 rounded-lg hover:bg-red-800 focus:ring-4 focus:ring-red-300 dark:focus:ring-red-900"},[D(s.$slots,"default")],8,pe))}}),X=G("adminUsers",{state:()=>({loading:!1,items:[],laravelData:[],meta:[],current:null,filter_params:[]}),getters:{},actions:{async get(t){var r,s,l,n,g;this.loading=!0;try{const p=JSON.parse(JSON.stringify(t)),{data:e,error:c}=await S("admin/users",{params:p});if(c.value)throw new Error(c.value);this.laravelData=(r=e==null?void 0:e.value)==null?void 0:r.data,this.items=(l=(s=e==null?void 0:e.value)==null?void 0:s.data)==null?void 0:l.data,this.meta=(g=(n=e==null?void 0:e.value)==null?void 0:n.data)==null?void 0:g.meta}catch(p){console.log(p)}this.loading=!1},async update(t,r){this.loading=!0;try{r instanceof FormData?r.append("_method","put"):r._method="put";const{data:s,error:l}=await S(`admin/users/${t}`,{method:"post",headers:{Accept:"application/json"},body:r});if(l.value)throw new Error(l.value);const{$toast:n}=I();n.success("Данные о пользователе успешно обновлены")}catch(s){console.log(s)}this.loading=!1},async store(t){this.loading=!1;try{const{data:r,error:s}=await S("admin/users",{method:"post",headers:{Accept:"application/json"},body:t});if(s.value)throw new Error(s.value);const{$toast:l}=I();l.success("Создан новый пользователь")}catch(r){console.log(r)}this.loading=!0},async destroy(t){this.loading=!0;try{await S(`admin/users/${t}`,{method:"delete"})}catch(r){console.log(r)}this.loading=!1}}}),Y=G("enum",{state:()=>({loading:!1,userRoles:[],userStatuses:[]}),getters:{},actions:{async getUserRoles(){var t;this.loading=!0;try{const{data:r,error:s}=await S("enums/user_roles");if(s.value)throw new Error(s.value);this.userRoles=(t=r==null?void 0:r.value)==null?void 0:t.data}catch(r){console.log(r)}this.loading=!1},async getUserStatuses(){var t;this.loading=!0;try{const{data:r,error:s}=await S("enums/user_statuses");if(s.value)throw new Error(s.value);this.userStatuses=(t=r==null?void 0:r.value)==null?void 0:t.data}catch(r){console.log(r)}this.loading=!1}}}),he={class:"bg-gray-50 dark:bg-gray-900"},fe={class:"w-full space-y-4 py-4 bg-white rounded-lg dark:bg-gray-800"},ve={class:"text-2xl font-bold text-gray-900 dark:text-white"},ye={class:""},xe={class:"grid grid-cols-6 gap-6"},be={class:"col-span-6 sm:col-span-3"},ke={class:"col-span-6 sm:col-span-3"},we={class:"col-span-6 sm:col-span-3"},_e={class:"col-span-6 sm:col-span-3"},Pe={class:"col-span-6 sm:col-span-3"},$e=["value"],Ue={class:"col-span-6 sm:col-span-3"},Be=["value"],Ce={class:"items-center pt-8 pb-4 rounded-b dark:border-gray-700"},Re=L({__name:"users",props:{modelValue:{type:Object}},emits:["update:modelValue","fetchPageData"],setup(t,{emit:r}){const s=t,l=r,n=Y(),g=K(),p=X();q();const e=Q(s.modelValue);async function c(){Object.keys(n.userRoles).length===0&&await n.getUserRoles(),Object.keys(n.userStatuses).length===0&&await n.getUserStatuses()}c(),y(),N(()=>g.dialogs.adminUser.active,h=>{y(),h?(se(),M()):(re(),m())}),N(()=>s.modelValue,h=>{e.value=h},{deep:!0});function y(){for(let h in e.value.form)e.value.form[h]=""}const _=()=>{l("fetchPageData")};async function v(){const h=e.value,i=JSON.parse(JSON.stringify(h.form));h.item?await p.update(h.item.id,i):await p.store(i),y(),m(),l("update:modelValue",h),await _()}function m(){e.value.show=!1,l("update:modelValue",e.value),g.close("adminUser")}function M(){e.value.show=!0,e.value.formDefault?e.value.form=Object.assign({},e.value.formDefault):e.value.formDefault=Object.assign({},e.value.form);const h=e.value.item;if(h){e.value.title=`Редактирование пользователя: ${h.name} (ID - ${h.id})`;for(let i in e.value.form){if(i==="role"){e.value.form[i]=n.userRoles.find(j=>j.display_name===h[i]).name;continue}h.hasOwnProperty(i)&&(e.value.form[i]=h[i])}}else e.value.title="Добавление пользователя"}return(h,i)=>{const j=W,b=le;return d(),A(b,{noFooter:!1,show:o(g).dialogs.adminUser.active,onClose:i[6]||(i[6]=f=>m())},{title:k(()=>[a("section",he,[a("div",fe,[a("h2",ve,x(o(e).title),1)])])]),content:k(()=>[a("div",ye,[a("form",null,[a("div",xe,[a("div",be,[i[7]||(i[7]=a("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Имя",-1)),O(a("input",{"onUpdate:modelValue":i[0]||(i[0]=f=>o(e).form.name=f),type:"text",name:"name",id:"name",class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"ФИО"},null,512),[[E,o(e).form.name]])]),a("div",ke,[i[8]||(i[8]=a("label",{for:"phone",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Номер телефона",-1)),O(a("input",{"onUpdate:modelValue":i[1]||(i[1]=f=>o(e).form.phone=f),type:"text",name:"phone",id:"phone",class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"+79998887766"},null,512),[[E,o(e).form.phone]])]),a("div",we,[i[9]||(i[9]=a("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Email",-1)),O(a("input",{"onUpdate:modelValue":i[2]||(i[2]=f=>o(e).form.email=f),type:"email",name:"email",id:"email",class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"example@company.com"},null,512),[[E,o(e).form.email]])]),a("div",_e,[i[10]||(i[10]=a("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Пароль",-1)),O(a("input",{"onUpdate:modelValue":i[3]||(i[3]=f=>o(e).form.password=f),type:"password",name:"password",id:"password",class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"********"},null,512),[[E,o(e).form.password]])]),a("div",Pe,[i[11]||(i[11]=a("label",{for:"status",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Статус",-1)),O(a("select",{"onUpdate:modelValue":i[4]||(i[4]=f=>o(e).form.status=f),id:"status",name:"status",class:"border bg-gray-50 border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"},[(d(!0),u(B,null,R(o(n).userStatuses,f=>(d(),u("option",{value:f.value},x(f.value),9,$e))),256))],512),[[T,o(e).form.status]])]),a("div",Ue,[i[12]||(i[12]=a("label",{for:"role",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Роль",-1)),O(a("select",{"onUpdate:modelValue":i[5]||(i[5]=f=>o(e).form.role=f),id:"role",name:"role",class:"border bg-gray-50 border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"},[(d(!0),u(B,null,R(o(n).userRoles,f=>(d(),u("option",{value:f.name},x(f.display_name),9,Be))),256))],512),[[T,o(e).form.role]])])])])])]),footer:k(()=>[a("div",Ce,[U(j,{onClick:v,disabled:o(p).loading,type:"button"},{default:k(()=>[C(x(o(p).loading?"Загрузка...":o(e).item?"Обновить":"Добавить"),1)]),_:1},8,["disabled"])])]),_:1},8,["show"])}}}),z={emits:["pagination-change-page"],props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},keepLength:{type:Boolean,default:!1}},computed:{isApiResource(){return!!this.data.meta},currentPage(){var t;return this.isApiResource?this.data.meta.current_page:(t=this.data.current_page)!=null?t:null},firstPageUrl(){var t,r,s,l,n;return(n=(l=(r=this.data.first_page_url)!=null?r:(t=this.data.meta)==null?void 0:t.first_page_url)!=null?l:(s=this.data.links)==null?void 0:s.first)!=null?n:null},from(){var t;return this.isApiResource?this.data.meta.from:(t=this.data.from)!=null?t:null},lastPage(){var t;return this.isApiResource?this.data.meta.last_page:(t=this.data.last_page)!=null?t:null},lastPageUrl(){var t,r,s,l,n;return(n=(l=(r=this.data.last_page_url)!=null?r:(t=this.data.meta)==null?void 0:t.last_page_url)!=null?l:(s=this.data.links)==null?void 0:s.last)!=null?n:null},nextPageUrl(){var t,r,s,l,n;return(n=(l=(r=this.data.next_page_url)!=null?r:(t=this.data.meta)==null?void 0:t.next_page_url)!=null?l:(s=this.data.links)==null?void 0:s.next)!=null?n:null},perPage(){var t;return this.isApiResource?this.data.meta.per_page:(t=this.data.per_page)!=null?t:null},prevPageUrl(){var t,r,s,l,n;return(n=(l=(r=this.data.prev_page_url)!=null?r:(t=this.data.meta)==null?void 0:t.prev_page_url)!=null?l:(s=this.data.links)==null?void 0:s.prev)!=null?n:null},to(){var t;return this.isApiResource?this.data.meta.to:(t=this.data.to)!=null?t:null},total(){var t;return this.isApiResource?this.data.meta.total:(t=this.data.total)!=null?t:null},pageRange(){if(this.limit===-1)return 0;if(this.limit===0)return this.lastPage;for(var t=this.currentPage,r=this.keepLength,s=this.lastPage,l=this.limit,n=t-l,g=t+l,p=(l+2)*2,e=(l+2)*2-1,c=[],y=[],_,v=1;v<=s;v++)(v===1||v===s||v>=n&&v<=g||r&&v<p&&t<p-2||r&&v>s-e&&t>s-e+2)&&c.push(v);return c.forEach(function(m){_&&(m-_===2?y.push(_+1):m-_!==1&&y.push("...")),y.push(m),_=m}),y}},methods:{previousPage(){this.selectPage(this.currentPage-1)},nextPage(){this.selectPage(this.currentPage+1)},selectPage(t){t==="..."||t===this.currentPage||this.$emit("pagination-change-page",t)}},render(){return this.$slots.default({data:this.data,limit:this.limit,computed:{isApiResource:this.isApiResource,currentPage:this.currentPage,firstPageUrl:this.firstPageUrl,from:this.from,lastPage:this.lastPage,lastPageUrl:this.lastPageUrl,nextPageUrl:this.nextPageUrl,perPage:this.perPage,prevPageUrl:this.prevPageUrl,to:this.to,total:this.total,pageRange:this.pageRange},prevButtonEvents:{click:t=>{t.preventDefault(),this.previousPage()}},nextButtonEvents:{click:t=>{t.preventDefault(),this.nextPage()}},pageButtonEvents:t=>({click:r=>{r.preventDefault(),this.selectPage(t)}})})}},H=(t,r)=>{const s=t.__vccOpts||t;for(const[l,n]of r)s[l]=n;return s},De={compatConfig:{MODE:3},inheritAttrs:!1,emits:["pagination-change-page"],components:{RenderlessPagination:z},props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},keepLength:{type:Boolean,default:!1},showDisabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator:t=>["small","default","large"].indexOf(t)!==-1},align:{type:String,default:"left",validator:t=>["left","center","right"].indexOf(t)!==-1}},methods:{onPaginationChangePage(t){this.$emit("pagination-change-page",t)}}},Oe=["tabindex"],Se=a("span",{"aria-hidden":"true"},"«",-1),Ve=a("span",{class:"sr-only"},"Previous",-1),je={key:0,class:"sr-only"},Ae=["tabindex"],Ee=a("span",{"aria-hidden":"true"},"»",-1),ze=a("span",{class:"sr-only"},"Next",-1);function Me(t,r,s,l,n,g){const p=F("RenderlessPagination");return d(),A(p,{data:s.data,limit:s.limit,"keep-length":s.keepLength,onPaginationChangePage:g.onPaginationChangePage},{default:k(e=>[e.computed.total>e.computed.perPage?(d(),u("ul",w({key:0},t.$attrs,{class:["pagination",{"pagination-sm":s.size=="small","pagination-lg":s.size=="large","justify-content-center":s.align=="center","justify-content-end":s.align=="right"}]}),[e.computed.prevPageUrl||s.showDisabled?(d(),u("li",{key:0,class:V(["page-item pagination-prev-nav",{disabled:!e.computed.prevPageUrl}])},[a("a",w({class:"page-link",href:"#","aria-label":"Previous",tabindex:!e.computed.prevPageUrl&&-1},$(e.prevButtonEvents,!0)),[D(t.$slots,"prev-nav",{},()=>[Se,Ve])],16,Oe)],2)):P("",!0),(d(!0),u(B,null,R(e.computed.pageRange,(c,y)=>(d(),u("li",{class:V(["page-item pagination-page-nav",{active:c==e.computed.currentPage}]),key:y},[a("a",w({class:"page-link",href:"#"},$(e.pageButtonEvents(c),!0)),[C(x(c)+" ",1),c==e.computed.currentPage?(d(),u("span",je,"(current)")):P("",!0)],16)],2))),128)),e.computed.nextPageUrl||s.showDisabled?(d(),u("li",{key:1,class:V(["page-item pagination-next-nav",{disabled:!e.computed.nextPageUrl}])},[a("a",w({class:"page-link",href:"#","aria-label":"Next",tabindex:!e.computed.nextPageUrl&&-1},$(e.nextButtonEvents,!0)),[D(t.$slots,"next-nav",{},()=>[Ee,ze])],16,Ae)],2)):P("",!0)],16)):P("",!0)]),_:3},8,["data","limit","keep-length","onPaginationChangePage"])}const Ne=H(De,[["render",Me]]),Le={compatConfig:{MODE:3},inheritAttrs:!1,emits:["pagination-change-page"],components:{RenderlessPagination:z},props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},showDisabled:{type:Boolean,default:!1},keepLength:{type:Boolean,default:!1},size:{type:String,default:"default",validator:t=>["small","default","large"].indexOf(t)!==-1},align:{type:String,default:"left",validator:t=>["left","center","right"].indexOf(t)!==-1}},methods:{onPaginationChangePage(t){this.$emit("pagination-change-page",t)}}},Fe=["tabindex"],He=a("span",{"aria-hidden":"true"},"«",-1),Ie=["aria-current"],Te=["tabindex"],Je=a("span",{"aria-hidden":"true"},"»",-1);function qe(t,r,s,l,n,g){const p=F("RenderlessPagination");return d(),A(p,{data:s.data,limit:s.limit,"keep-length":s.keepLength,onPaginationChangePage:g.onPaginationChangePage},{default:k(e=>[e.computed.total>e.computed.perPage?(d(),u("ul",w({key:0},t.$attrs,{class:["pagination",{"pagination-sm":s.size=="small","pagination-lg":s.size=="large","justify-content-center":s.align=="center","justify-content-end":s.align=="right"}]}),[e.computed.prevPageUrl||s.showDisabled?(d(),u("li",{key:0,class:V(["page-item pagination-prev-nav",{disabled:!e.computed.prevPageUrl}])},[a("a",w({class:"page-link",href:"#","aria-label":"Previous",tabindex:!e.computed.prevPageUrl&&-1},$(e.prevButtonEvents,!0)),[D(t.$slots,"prev-nav",{},()=>[He])],16,Fe)],2)):P("",!0),(d(!0),u(B,null,R(e.computed.pageRange,(c,y)=>(d(),u("li",{class:V(["page-item pagination-page-nav",{active:c==e.computed.currentPage}]),key:y},[a("a",w({class:"page-link",href:"#"},$(e.pageButtonEvents(c),!0),{"aria-current":c==e.computed.currentPage?"page":null}),x(c),17,Ie)],2))),128)),e.computed.nextPageUrl||s.showDisabled?(d(),u("li",{key:1,class:V(["page-item pagination-next-nav",{disabled:!e.computed.nextPageUrl}])},[a("a",w({class:"page-link",href:"#","aria-label":"Next",tabindex:!e.computed.nextPageUrl&&-1},$(e.nextButtonEvents,!0)),[D(t.$slots,"next-nav",{},()=>[Je])],16,Te)],2)):P("",!0)],16)):P("",!0)]),_:3},8,["data","limit","keep-length","onPaginationChangePage"])}const Ge=H(Le,[["render",qe]]),Ke={compatConfig:{MODE:3},inheritAttrs:!1,emits:["pagination-change-page"],components:{RenderlessPagination:z},props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},keepLength:{type:Boolean,default:!1},itemClasses:{type:Array,default:()=>["bg-white","text-gray-500","border-gray-300","hover:bg-gray-50"]},activeClasses:{type:Array,default:()=>["bg-blue-50","border-blue-500","text-blue-600"]}},methods:{onPaginationChangePage(t){this.$emit("pagination-change-page",t)}}},Qe=["disabled"],We=a("span",{class:"sr-only"},"Previous",-1),Xe=a("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})],-1),Ye=["aria-current","disabled"],Ze=["disabled"],et=a("span",{class:"sr-only"},"Next",-1),tt=a("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1);function at(t,r,s,l,n,g){const p=F("RenderlessPagination");return d(),A(p,{data:s.data,limit:s.limit,"keep-length":s.keepLength,onPaginationChangePage:g.onPaginationChangePage},{default:k(e=>[e.computed.total>e.computed.perPage?(d(),u("nav",w({key:0},t.$attrs,{class:"inline-flex -space-x-px rounded-md shadow-sm isolate ltr:flex-row rtl:flex-row-reverse","aria-label":"Pagination"}),[a("button",w({class:["relative inline-flex items-center px-2 py-2 text-sm font-medium border rounded-l-md focus:z-20 disabled:opacity-50",s.itemClasses],disabled:!e.computed.prevPageUrl},$(e.prevButtonEvents,!0)),[D(t.$slots,"prev-nav",{},()=>[We,Xe])],16,Qe),(d(!0),u(B,null,R(e.computed.pageRange,(c,y)=>(d(),u("button",w({class:["relative inline-flex items-center px-4 py-2 text-sm font-medium border focus:z-20",[c==e.computed.currentPage?s.activeClasses:s.itemClasses,c==e.computed.currentPage?"z-30":""]],"aria-current":e.computed.currentPage?"page":null,key:y},$(e.pageButtonEvents(c),!0),{disabled:c===e.computed.currentPage}),x(c),17,Ye))),128)),a("button",w({class:["relative inline-flex items-center px-2 py-2 text-sm font-medium border rounded-r-md focus:z-20 disabled:opacity-50",s.itemClasses],disabled:!e.computed.nextPageUrl},$(e.nextButtonEvents,!0)),[D(t.$slots,"next-nav",{},()=>[et,tt])],16,Ze)],16)):P("",!0)]),_:3},8,["data","limit","keep-length","onPaginationChangePage"])}const st=H(Ke,[["render",at]]),rt=Object.freeze(Object.defineProperty({__proto__:null,Bootstrap4Pagination:Ne,Bootstrap5Pagination:Ge,RenderlessPagination:z,TailwindPagination:st},Symbol.toStringTag,{value:"Module"})),lt={class:"p-4 bg-white block sm:flex items-center justify-between border-b border-gray-200 lg:mt-1.5 dark:bg-gray-800 dark:border-gray-700"},nt={class:"w-full mb-1"},ot={class:"sm:flex"},it={class:"flex items-center ml-auto space-x-2 sm:space-x-3"},dt={class:"flex flex-col"},ut={class:"overflow-x-auto"},gt={class:"inline-block min-w-full align-middle"},ct={class:"overflow-hidden shadow"},pt={class:"min-w-full divide-y divide-gray-200 table-fixed dark:divide-gray-600"},mt={class:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700"},ht={class:"hover:bg-gray-100 dark:hover:bg-gray-700"},ft={class:"p-4 text-base text-center font-medium text-gray-900 whitespace-nowrap dark:text-white"},vt={class:"flex items-center p-4 mr-12 space-x-6 whitespace-nowrap"},yt={class:"text-sm font-normal text-gray-500 dark:text-gray-400"},xt={class:"text-base font-semibold text-gray-900 dark:text-white"},bt={class:"text-sm font-normal text-gray-500 dark:text-gray-400"},kt={class:"max-w-sm p-4 overflow-hidden text-base font-normal text-gray-500 truncate xl:max-w-xs dark:text-gray-400"},wt={class:"p-4 text-base font-medium text-gray-900 whitespace-nowrap dark:text-white"},_t={class:"p-4 text-base font-medium text-gray-900 whitespace-nowrap dark:text-white"},Pt={class:"p-4 space-x-2 whitespace-nowrap"},$t={key:0},Ut={key:1},Bt={class:"sticky bottom-0 right-0 items-center w-full p-4 bg-white border-t border-gray-200 sm:flex sm:justify-between dark:bg-gray-800 dark:border-gray-700"},Ot=L({__name:"users",setup(t){const{TailwindPagination:r}=rt;Q([{name:"ID по возрастанию",value:"id-asc"},{name:"ID по убыванию",value:"id-desc"},{name:"ФИО по возрастанию (А - Я)",value:"name-asc"},{name:"ФИО по убыванию (Я - А)",value:"name-desc"},{name:"Номер телефона (по возрастанию)",value:"phone-asc"},{name:"Номер телефона (по убыванию)",value:"phone-desc"}]);const s=X(),l=Y(),n=K(),g=J({role:null,status:"",sort:"",per_page:null,page:1});function p(v){g.page=v}N(g,v=>{s.get(g)});const e=J({show:!1,title:"",formRef:null,form:{name:"",email:"",phone:"",password:"",role:"",status:""},item:null});async function c(){Object.keys(l.userRoles).length===0&&await l.getUserRoles(),Object.keys(l.userStatuses).length===0&&await l.getUserStatuses()}c(),s.get(g);async function y(v){confirm(`Действие необратимо!
Вы уверены?`)&&(await s.destroy(v.id),await s.get(g))}function _(v){console.log("click"),n.open("adminUser"),console.log(n.dialogs.adminUser.active),e.item=v||null}return(v,m)=>{const M=ce,h=W,i=me,j=Re;return d(),u(B,null,[a("div",lt,[a("div",nt,[U(M),a("div",ot,[m[4]||(m[4]=a("h1",{class:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white"},"Все пользователи",-1)),a("div",it,[U(h,{disabled:o(s).loading&&o(l).loading,onClick:m[0]||(m[0]=b=>_())},{default:k(()=>m[3]||(m[3]=[a("svg",{class:"w-5 h-5 mr-2 -ml-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[a("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),C(" Добавить пользователя ")])),_:1},8,["disabled"])])])])]),a("div",dt,[a("div",ut,[a("div",gt,[a("div",ct,[a("table",pt,[m[7]||(m[7]=a("thead",{class:"bg-gray-100 dark:bg-gray-700"},[a("tr",null,[a("th",{scope:"col",class:"p-4"}," ID "),a("th",{scope:"col",class:"p-4 text-xs font-medium text-left text-gray-500 uppercase dark:text-gray-400"}," ФИО "),a("th",{scope:"col",class:"p-4 text-xs font-medium text-left text-gray-500 uppercase dark:text-gray-400"}," Номер телефона "),a("th",{scope:"col",class:"p-4 text-xs font-medium text-left text-gray-500 uppercase dark:text-gray-400"}," Роль "),a("th",{scope:"col",class:"p-4 text-xs font-medium text-left text-gray-500 uppercase dark:text-gray-400"}," Статус "),a("th",{scope:"col",class:"p-4 text-xs font-medium text-left text-gray-500 uppercase dark:text-gray-400"})])],-1)),a("tbody",mt,[(d(!0),u(B,null,R(o(s).items,b=>(d(),u("tr",ht,[a("td",ft,x(b.id),1),a("td",vt,[a("div",yt,[a("div",xt,x(b.name),1),a("div",bt,x(b.email),1)])]),a("td",kt,x(b.phone),1),a("td",wt,x(b.role??"-"),1),a("td",_t,x(b.status),1),a("td",Pt,[U(h,{disabled:o(s).loading&&o(l).loading,onClick:f=>_(b)},{default:k(()=>m[5]||(m[5]=[a("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[a("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),a("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"})],-1),C(" Редактировать ")])),_:2},1032,["disabled","onClick"]),U(i,{disabled:o(s).loading&&o(l).loading,onClick:f=>y(b)},{default:k(()=>m[6]||(m[6]=[a("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[a("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),C(" Удалить ")])),_:2},1032,["disabled","onClick"])])]))),256))])]),o(s).items.length==0&&(o(s).loading||o(l).loading)?(d(),u("span",$t,"Загрузка...")):P("",!0),o(s).items.length==0&&!o(s).loading&&!o(l).loading?(d(),u("span",Ut,"Нет пользователей")):P("",!0)])])])]),a("div",Bt,[U(o(r),{class:"mt-4",data:o(s).laravelData,onPaginationChangePage:p},null,8,["data"])]),U(j,{modelValue:o(e),"onUpdate:modelValue":m[1]||(m[1]=b=>ae(e)?e.value=b:null),onFetchPageData:m[2]||(m[2]=b=>o(s).get(o(g)))},null,8,["modelValue"])],64)}}});export{Ot as default};
